# ==============================================
# URL Shortener - Environment Variables
# ==============================================
# Copy this file to .env and update the values

# ==============================================
# DATABASE CONFIGURATION
# ==============================================
POSTGRES_DB=urlshortener
POSTGRES_USER=admin
POSTGRES_PASSWORD=admin123
POSTGRES_HOST=localhost
POSTGRES_PORT=5433

# Database Connection String
DATABASE_URL=postgresql://admin:admin123@localhost:5433/urlshortener

# ==============================================
# REDIS CONFIGURATION
# ==============================================
REDIS_HOST=localhost
REDIS_PORT=6380
REDIS_PASSWORD=
REDIS_URL=redis://localhost:6380

# ==============================================
# KAFKA CONFIGURATION
# ==============================================
KAFKA_BROKERS=localhost:9092
KAFKA_CLIENT_ID=url-shortener
KAFKA_GROUP_ID=url-shortener-group

# ==============================================
# JWT CONFIGURATION
# ==============================================
# Generate a secure random string for production
# Example: openssl rand -hex 64
JWT_SECRET=your-super-secret-jwt-key-change-this-in-production
JWT_EXPIRES_IN=7d
JWT_REFRESH_SECRET=your-super-secret-refresh-key-change-this-in-production
JWT_REFRESH_EXPIRES_IN=30d

# ==============================================
# API GATEWAY CONFIGURATION
# ==============================================
API_GATEWAY_PORT=3000
API_GATEWAY_HOST=localhost

# Service URLs (internal)
AUTH_SERVICE_URL=http://localhost:3001
URL_SHORTENER_SERVICE_URL=http://localhost:3002
REDIRECT_SERVICE_URL=http://localhost:3003
USER_SERVICE_URL=http://localhost:3004
ANALYTICS_SERVICE_URL=http://localhost:3005
NOTIFICATION_SERVICE_URL=http://localhost:3006
EMAIL_SERVICE_URL=http://localhost:3007

# ==============================================
# MICROSERVICES PORTS
# ==============================================
AUTH_SERVICE_PORT=3001
URL_SHORTENER_SERVICE_PORT=3002
REDIRECT_SERVICE_PORT=3003
USER_SERVICE_PORT=3004
ANALYTICS_SERVICE_PORT=3005
NOTIFICATION_SERVICE_PORT=3006
EMAIL_SERVICE_PORT=3007

# ==============================================
# EMAIL CONFIGURATION (Nodemailer)
# ==============================================
# For Gmail:
EMAIL_HOST=smtp.gmail.com
EMAIL_PORT=587
EMAIL_SECURE=false
EMAIL_USER=your-email@gmail.com
EMAIL_PASSWORD=your-app-specific-password
EMAIL_FROM=URL Shortener <noreply@urlshortener.com>

# For SendGrid:
# EMAIL_HOST=smtp.sendgrid.net
# EMAIL_PORT=587
# EMAIL_USER=apikey
# EMAIL_PASSWORD=your-sendgrid-api-key

# For AWS SES:
# EMAIL_HOST=email-smtp.us-east-1.amazonaws.com
# EMAIL_PORT=587
# EMAIL_USER=your-ses-smtp-username
# EMAIL_PASSWORD=your-ses-smtp-password

# ==============================================
# FRONTEND CONFIGURATION
# ==============================================
NEXT_PUBLIC_API_URL=http://localhost:3000
NEXT_PUBLIC_APP_URL=http://localhost:3000
NEXT_PUBLIC_SHORT_URL_DOMAIN=http://localhost:3000

# ==============================================
# RATE LIMITING
# ==============================================
RATE_LIMIT_WINDOW_MS=60000
RATE_LIMIT_MAX_REQUESTS=100
RATE_LIMIT_REDIRECT_MAX=1000

# ==============================================
# CACHE CONFIGURATION
# ==============================================
CACHE_TTL_SECONDS=86400
CACHE_HOT_URLS_COUNT=10000

# ==============================================
# APPLICATION CONFIGURATION
# ==============================================
NODE_ENV=development
LOG_LEVEL=info
PORT=3000

# Base62 characters for URL shortening
BASE62_CHARS=0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ

# Short code length
SHORT_CODE_LENGTH=7

# ==============================================
# MONITORING & LOGGING
# ==============================================
# Enable request logging
ENABLE_REQUEST_LOGGING=true

# Enable error logging
ENABLE_ERROR_LOGGING=true

# Log file paths (optional)
LOG_FILE_PATH=./logs/app.log
ERROR_LOG_FILE_PATH=./logs/error.log

# ==============================================
# CORS CONFIGURATION
# ==============================================
CORS_ORIGIN=http://localhost:3000,http://localhost:3001
CORS_CREDENTIALS=true

# ==============================================
# SECURITY
# ==============================================
# OTP Configuration
OTP_LENGTH=6
OTP_EXPIRY_SECONDS=300

# Password Requirements
MIN_PASSWORD_LENGTH=8
REQUIRE_PASSWORD_SPECIAL_CHAR=true
REQUIRE_PASSWORD_NUMBER=true
REQUIRE_PASSWORD_UPPERCASE=true

# ==============================================
# ANALYTICS
# ==============================================
# Batch insert configuration for click events
ANALYTICS_BATCH_SIZE=100
ANALYTICS_BATCH_INTERVAL_MS=5000

# ==============================================
# URL CONFIGURATION
# ==============================================
# Maximum length for custom aliases
MAX_CUSTOM_ALIAS_LENGTH=50

# URL expiration (days) - 0 means no expiration by default
DEFAULT_URL_EXPIRY_DAYS=0

# Maximum URLs per user (0 = unlimited)
MAX_URLS_PER_USER=0
